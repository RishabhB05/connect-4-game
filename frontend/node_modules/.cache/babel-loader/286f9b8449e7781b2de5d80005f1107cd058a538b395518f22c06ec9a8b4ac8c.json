{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\risha\\\\Music\\\\connect-four-main\\\\frontend\\\\src\\\\context\\\\SocketContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport { io } from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SocketContext = /*#__PURE__*/createContext();\nexport const SocketProvider = ({\n  children\n}) => {\n  _s();\n  const [socket, setSocket] = useState(null);\n  const [roomId, setRoomId] = useState(null);\n  const [playerName, setPlayerName] = useState('');\n  const [players, setPlayers] = useState([]);\n  const [gameState, setGameState] = useState(null);\n  const [gameOver, setGameOver] = useState(false);\n  const [winner, setWinner] = useState(null);\n  const [currentPlayer, setCurrentPlayer] = useState('red');\n  const [error, setError] = useState(null);\n  const [connected, setConnected] = useState(false);\n\n  // Initialize socket connection\n  useEffect(() => {\n    var _process$env$REACT_AP;\n    const socketUrl = ((_process$env$REACT_AP = process.env.REACT_APP_API_URL) === null || _process$env$REACT_AP === void 0 ? void 0 : _process$env$REACT_AP.replace('/api', '')) || 'http://localhost:5000';\n    const newSocket = io(socketUrl);\n    newSocket.on('connect', () => {\n      console.log('Connected to server');\n      setConnected(true);\n      setError(null);\n    });\n    newSocket.on('disconnect', () => {\n      console.log('Disconnected from server');\n      setConnected(false);\n    });\n    newSocket.on('player_joined', data => {\n      setPlayers(data.players);\n      setGameState(data.gameState);\n      setCurrentPlayer(data.gameState.currentPlayer);\n    });\n    newSocket.on('move_made', data => {\n      setGameState({\n        ...gameState,\n        board: data.board\n      });\n      setCurrentPlayer(data.currentPlayer);\n      setGameOver(data.gameOver);\n      if (data.gameOver) {\n        setWinner(data.winner);\n      }\n    });\n    newSocket.on('move_error', data => {\n      setError(data.message);\n    });\n    newSocket.on('game_reset', data => {\n      setGameState(data.gameState);\n      setCurrentPlayer(data.gameState.currentPlayer);\n      setGameOver(false);\n      setWinner(null);\n      setPlayers(data.players);\n    });\n    newSocket.on('player_left', data => {\n      console.log(`Player ${data.playerId} left the room`);\n    });\n    setSocket(newSocket);\n    return () => {\n      newSocket.disconnect();\n    };\n  }, []);\n\n  // Join a room\n  const joinRoom = useCallback((newRoomId, name) => {\n    if (socket && socket.connected) {\n      setRoomId(newRoomId);\n      setPlayerName(name);\n      socket.emit('join_room', newRoomId, name);\n    } else {\n      setError('Socket not connected');\n    }\n  }, [socket]);\n\n  // Make a move\n  const makeMove = useCallback(column => {\n    if (socket && roomId) {\n      socket.emit('make_move', roomId, column);\n    } else {\n      setError('Not connected to a room');\n    }\n  }, [socket, roomId]);\n\n  // Reset game\n  const resetGame = useCallback(() => {\n    if (socket && roomId) {\n      socket.emit('reset_game', roomId);\n      setGameOver(false);\n      setWinner(null);\n    }\n  }, [socket, roomId]);\n\n  // Leave room\n  const leaveRoom = useCallback(() => {\n    if (socket && roomId) {\n      socket.emit('leave_room', roomId);\n      setRoomId(null);\n      setPlayers([]);\n      setGameState(null);\n      setGameOver(false);\n      setWinner(null);\n    }\n  }, [socket, roomId]);\n  const value = {\n    socket,\n    connected,\n    roomId,\n    playerName,\n    players,\n    gameState,\n    gameOver,\n    winner,\n    currentPlayer,\n    error,\n    joinRoom,\n    makeMove,\n    resetGame,\n    leaveRoom,\n    setError\n  };\n  return /*#__PURE__*/_jsxDEV(SocketContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 135,\n    columnNumber: 5\n  }, this);\n};\n_s(SocketProvider, \"3TAgUvg8RxlnvCgiCAsDRTLvGs8=\");\n_c = SocketProvider;\nexport const useSocket = () => {\n  _s2();\n  const context = useContext(SocketContext);\n  if (!context) {\n    throw new Error('useSocket must be used within SocketProvider');\n  }\n  return context;\n};\n_s2(useSocket, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"SocketProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useCallback","io","jsxDEV","_jsxDEV","SocketContext","SocketProvider","children","_s","socket","setSocket","roomId","setRoomId","playerName","setPlayerName","players","setPlayers","gameState","setGameState","gameOver","setGameOver","winner","setWinner","currentPlayer","setCurrentPlayer","error","setError","connected","setConnected","_process$env$REACT_AP","socketUrl","process","env","REACT_APP_API_URL","replace","newSocket","on","console","log","data","board","message","playerId","disconnect","joinRoom","newRoomId","name","emit","makeMove","column","resetGame","leaveRoom","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useSocket","_s2","context","Error","$RefreshReg$"],"sources":["C:/Users/risha/Music/connect-four-main/frontend/src/context/SocketContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\r\nimport { io } from 'socket.io-client';\r\n\r\nconst SocketContext = createContext();\r\n\r\nexport const SocketProvider = ({ children }) => {\r\n  const [socket, setSocket] = useState(null);\r\n  const [roomId, setRoomId] = useState(null);\r\n  const [playerName, setPlayerName] = useState('');\r\n  const [players, setPlayers] = useState([]);\r\n  const [gameState, setGameState] = useState(null);\r\n  const [gameOver, setGameOver] = useState(false);\r\n  const [winner, setWinner] = useState(null);\r\n  const [currentPlayer, setCurrentPlayer] = useState('red');\r\n  const [error, setError] = useState(null);\r\n  const [connected, setConnected] = useState(false);\r\n\r\n  // Initialize socket connection\r\n  useEffect(() => {\r\n    const socketUrl = process.env.REACT_APP_API_URL?.replace('/api', '') || 'http://localhost:5000';\r\n    const newSocket = io(socketUrl);\r\n\r\n    newSocket.on('connect', () => {\r\n      console.log('Connected to server');\r\n      setConnected(true);\r\n      setError(null);\r\n    });\r\n\r\n    newSocket.on('disconnect', () => {\r\n      console.log('Disconnected from server');\r\n      setConnected(false);\r\n    });\r\n\r\n    newSocket.on('player_joined', (data) => {\r\n      setPlayers(data.players);\r\n      setGameState(data.gameState);\r\n      setCurrentPlayer(data.gameState.currentPlayer);\r\n    });\r\n\r\n    newSocket.on('move_made', (data) => {\r\n      setGameState({\r\n        ...gameState,\r\n        board: data.board\r\n      });\r\n      setCurrentPlayer(data.currentPlayer);\r\n      setGameOver(data.gameOver);\r\n      if (data.gameOver) {\r\n        setWinner(data.winner);\r\n      }\r\n    });\r\n\r\n    newSocket.on('move_error', (data) => {\r\n      setError(data.message);\r\n    });\r\n\r\n    newSocket.on('game_reset', (data) => {\r\n      setGameState(data.gameState);\r\n      setCurrentPlayer(data.gameState.currentPlayer);\r\n      setGameOver(false);\r\n      setWinner(null);\r\n      setPlayers(data.players);\r\n    });\r\n\r\n    newSocket.on('player_left', (data) => {\r\n      console.log(`Player ${data.playerId} left the room`);\r\n    });\r\n\r\n    setSocket(newSocket);\r\n\r\n    return () => {\r\n      newSocket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  // Join a room\r\n  const joinRoom = useCallback((newRoomId, name) => {\r\n    if (socket && socket.connected) {\r\n      setRoomId(newRoomId);\r\n      setPlayerName(name);\r\n      socket.emit('join_room', newRoomId, name);\r\n    } else {\r\n      setError('Socket not connected');\r\n    }\r\n  }, [socket]);\r\n\r\n  // Make a move\r\n  const makeMove = useCallback((column) => {\r\n    if (socket && roomId) {\r\n      socket.emit('make_move', roomId, column);\r\n    } else {\r\n      setError('Not connected to a room');\r\n    }\r\n  }, [socket, roomId]);\r\n\r\n  // Reset game\r\n  const resetGame = useCallback(() => {\r\n    if (socket && roomId) {\r\n      socket.emit('reset_game', roomId);\r\n      setGameOver(false);\r\n      setWinner(null);\r\n    }\r\n  }, [socket, roomId]);\r\n\r\n  // Leave room\r\n  const leaveRoom = useCallback(() => {\r\n    if (socket && roomId) {\r\n      socket.emit('leave_room', roomId);\r\n      setRoomId(null);\r\n      setPlayers([]);\r\n      setGameState(null);\r\n      setGameOver(false);\r\n      setWinner(null);\r\n    }\r\n  }, [socket, roomId]);\r\n\r\n  const value = {\r\n    socket,\r\n    connected,\r\n    roomId,\r\n    playerName,\r\n    players,\r\n    gameState,\r\n    gameOver,\r\n    winner,\r\n    currentPlayer,\r\n    error,\r\n    joinRoom,\r\n    makeMove,\r\n    resetGame,\r\n    leaveRoom,\r\n    setError\r\n  };\r\n\r\n  return (\r\n    <SocketContext.Provider value={value}>\r\n      {children}\r\n    </SocketContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useSocket = () => {\r\n  const context = useContext(SocketContext);\r\n  if (!context) {\r\n    throw new Error('useSocket must be used within SocketProvider');\r\n  }\r\n  return context;\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}