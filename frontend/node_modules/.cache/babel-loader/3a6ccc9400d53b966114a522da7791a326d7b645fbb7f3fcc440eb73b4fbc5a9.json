{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Slot}from\"./Slot\";import{useSocket}from\"../context/SocketContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const Board=_ref=>{var _players$find3,_players$find4;let{onLeaveRoom}=_ref;const{gameState,currentPlayer,gameOver,winner,players,makeMove,resetGame,playerName,leaveRoom,socket,roomId}=useSocket();const[board,setBoard]=useState(null);const[isMyTurn,setIsMyTurn]=useState(false);useEffect(()=>{if(gameState){var _players$find;setBoard(gameState.board);// Determine if it's the current player's turn based on their color\nconst myColor=(_players$find=players.find(p=>p.name===playerName))===null||_players$find===void 0?void 0:_players$find.color;setIsMyTurn(myColor===currentPlayer);}},[gameState,currentPlayer,playerName,players]);// Show alert when game ends\nuseEffect(()=>{if(gameOver&&winner){var _players$find2;const myColor=(_players$find2=players.find(p=>p.name===playerName))===null||_players$find2===void 0?void 0:_players$find2.color;const winnerPlayer=players.find(p=>p.color===winner);const winnerName=(winnerPlayer===null||winnerPlayer===void 0?void 0:winnerPlayer.name)||winner;setTimeout(()=>{if(winner===myColor){alert(\"\\uD83C\\uDF89 \".concat(winnerName,\" won! \\uD83C\\uDF89\"));}else{alert(\"\".concat(winnerName,\" won!\"));}},500);}else if(gameOver&&!winner){setTimeout(()=>{alert(\"It's a draw!\");},500);}},[gameOver,winner,players,playerName]);const handleClick=e=>{if(!isMyTurn||gameOver||!socket)return;const column=parseInt(e.target.getAttribute('x'));makeMove(column);};if(!board||!gameState){return/*#__PURE__*/_jsx(\"div\",{className:\"board-loading\",children:\"Loading game...\"});}const myColor=(_players$find3=players.find(p=>p.name===playerName))===null||_players$find3===void 0?void 0:_players$find3.color;const opponentColor=myColor==='red'?'blue':'red';const opponentName=((_players$find4=players.find(p=>p.color===opponentColor))===null||_players$find4===void 0?void 0:_players$find4.name)||'Waiting...';return/*#__PURE__*/_jsxs(\"div\",{className:\"game-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"game-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"room-id-display\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"room-label\",children:\"Room ID:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"room-id-value\",children:roomId}),/*#__PURE__*/_jsx(\"button\",{className:\"copy-button\",onClick:()=>{navigator.clipboard.writeText(roomId);alert('Room ID copied to clipboard!');},children:\"\\uD83D\\uDCCB Copy\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"player-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"player-item my-player\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"player-color\",style:{backgroundColor:myColor}}),/*#__PURE__*/_jsxs(\"div\",{className:\"player-name\",children:[playerName,\" (You)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"vs\",children:\"vs\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"player-item opponent-player\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"player-color\",style:{backgroundColor:opponentColor}}),/*#__PURE__*/_jsx(\"div\",{className:\"player-name\",children:opponentName})]})]}),!gameOver&&/*#__PURE__*/_jsx(\"h2\",{id:\"playerDisplay\",className:isMyTurn?'my-turn':'opponent-turn',children:isMyTurn?'Your Turn':\"\".concat(opponentName,\"'s Turn\")})]}),gameOver&&/*#__PURE__*/_jsxs(\"div\",{className:\"game-over-message\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Game Over!\"}),winner?/*#__PURE__*/_jsx(\"p\",{className:\"winner-text\",children:winner===myColor?\"\\uD83C\\uDF89 You Win! \\uD83C\\uDF89\":\"\".concat(opponentName,\" Wins!\")}):/*#__PURE__*/_jsx(\"p\",{className:\"draw-text\",children:\"It's a Draw!\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"board\",className:\"board-grid\",onClick:!gameOver&&isMyTurn?handleClick:null,style:{cursor:isMyTurn&&!gameOver?'pointer':'default'},children:board.map((row,i)=>{return row.map((ch,j)=>/*#__PURE__*/_jsx(Slot,{ch:ch,y:i,x:j},\"\".concat(i,\"-\").concat(j)));})}),/*#__PURE__*/_jsxs(\"div\",{className:\"game-controls\",children:[gameOver&&/*#__PURE__*/_jsx(\"button\",{onClick:resetGame,className:\"btn btn-primary\",children:\"Play Again\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{leaveRoom();onLeaveRoom();},className:\"btn btn-secondary\",children:\"Leave Room\"})]})]});};","map":{"version":3,"names":["React","useState","useEffect","Slot","useSocket","jsx","_jsx","jsxs","_jsxs","Board","_ref","_players$find3","_players$find4","onLeaveRoom","gameState","currentPlayer","gameOver","winner","players","makeMove","resetGame","playerName","leaveRoom","socket","roomId","board","setBoard","isMyTurn","setIsMyTurn","_players$find","myColor","find","p","name","color","_players$find2","winnerPlayer","winnerName","setTimeout","alert","concat","handleClick","e","column","parseInt","target","getAttribute","className","children","opponentColor","opponentName","onClick","navigator","clipboard","writeText","style","backgroundColor","id","cursor","map","row","i","ch","j","y","x"],"sources":["C:/Users/risha/Music/connect-four-main/frontend/src/components/Board.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Slot } from \"./Slot\";\nimport { useSocket } from \"../context/SocketContext\";\n\nexport const Board = ({ onLeaveRoom }) => {\n    const {\n        gameState,\n        currentPlayer,\n        gameOver,\n        winner,\n        players,\n        makeMove,\n        resetGame,\n        playerName,\n        leaveRoom,\n        socket,\n        roomId\n    } = useSocket();\n\n    const [board, setBoard] = useState(null);\n    const [isMyTurn, setIsMyTurn] = useState(false);\n\n    useEffect(() => {\n        if (gameState) {\n            setBoard(gameState.board);\n            \n            // Determine if it's the current player's turn based on their color\n            const myColor = players.find(p => p.name === playerName)?.color;\n            setIsMyTurn(myColor === currentPlayer);\n        }\n    }, [gameState, currentPlayer, playerName, players]);\n\n    // Show alert when game ends\n    useEffect(() => {\n        if (gameOver && winner) {\n            const myColor = players.find(p => p.name === playerName)?.color;\n            const winnerPlayer = players.find(p => p.color === winner);\n            const winnerName = winnerPlayer?.name || winner;\n            \n            setTimeout(() => {\n                if (winner === myColor) {\n                    alert(`ðŸŽ‰ ${winnerName} won! ðŸŽ‰`);\n                } else {\n                    alert(`${winnerName} won!`);\n                }\n            }, 500);\n        } else if (gameOver && !winner) {\n            setTimeout(() => {\n                alert(\"It's a draw!\");\n            }, 500);\n        }\n    }, [gameOver, winner, players, playerName]);\n\n    const handleClick = (e) => {\n        if (!isMyTurn || gameOver || !socket) return;\n\n        const column = parseInt(e.target.getAttribute('x'));\n        makeMove(column);\n    };\n\n    if (!board || !gameState) {\n        return <div className=\"board-loading\">Loading game...</div>;\n    }\n\n    const myColor = players.find(p => p.name === playerName)?.color;\n    const opponentColor = myColor === 'red' ? 'blue' : 'red';\n    const opponentName = players.find(p => p.color === opponentColor)?.name || 'Waiting...';\n\n    return (\n        <div className=\"game-container\">\n            <div className=\"game-header\">\n                <div className=\"room-id-display\">\n                    <span className=\"room-label\">Room ID:</span>\n                    <span className=\"room-id-value\">{roomId}</span>\n                    <button \n                        className=\"copy-button\"\n                        onClick={() => {\n                            navigator.clipboard.writeText(roomId);\n                            alert('Room ID copied to clipboard!');\n                        }}\n                    >\n                        ðŸ“‹ Copy\n                    </button>\n                </div>\n                \n                <div className=\"player-info\">\n                    <div className=\"player-item my-player\">\n                        <div className=\"player-color\" style={{ backgroundColor: myColor }}></div>\n                        <div className=\"player-name\">{playerName} (You)</div>\n                    </div>\n                    <div className=\"vs\">vs</div>\n                    <div className=\"player-item opponent-player\">\n                        <div className=\"player-color\" style={{ backgroundColor: opponentColor }}></div>\n                        <div className=\"player-name\">{opponentName}</div>\n                    </div>\n                </div>\n                \n                {!gameOver && (\n                    <h2 id='playerDisplay' className={isMyTurn ? 'my-turn' : 'opponent-turn'}>\n                        {isMyTurn ? 'Your Turn' : `${opponentName}'s Turn`}\n                    </h2>\n                )}\n            </div>\n\n            {gameOver && (\n                <div className=\"game-over-message\">\n                    <h2>Game Over!</h2>\n                    {winner ? (\n                        <p className=\"winner-text\">\n                            {winner === myColor ? `ðŸŽ‰ You Win! ðŸŽ‰` : `${opponentName} Wins!`}\n                        </p>\n                    ) : (\n                        <p className=\"draw-text\">It's a Draw!</p>\n                    )}\n                </div>\n            )}\n\n            <div \n                id='board'\n                className=\"board-grid\"\n                onClick={!gameOver && isMyTurn ? handleClick : null}\n                style={{ cursor: isMyTurn && !gameOver ? 'pointer' : 'default' }}\n            >\n                {board.map((row, i) => {\n                    return row.map((ch, j) => (\n                        <Slot key={`${i}-${j}`} ch={ch} y={i} x={j} />\n                    ));\n                })}\n            </div>\n\n            <div className=\"game-controls\">\n                {gameOver && (\n                    <button onClick={resetGame} className=\"btn btn-primary\">\n                        Play Again\n                    </button>\n                )}\n                <button \n                    onClick={() => {\n                        leaveRoom();\n                        onLeaveRoom();\n                    }} \n                    className=\"btn btn-secondary\"\n                >\n                    Leave Room\n                </button>\n            </div>\n        </div>\n    );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}